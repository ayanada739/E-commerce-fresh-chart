"use strict";(self.webpackChunkappE_commarce=self.webpackChunkappE_commarce||[]).push([[953],{7953:(m,d,r)=>{r.r(d),r.d(d,{WishListComponent:()=>f});var h=r(6814),l=r(7668),p=r(1120),t=r(4769),a=r(8806),v=r(6286),c=r(4219);function n(o,u){if(1&o){const i=t.EpF();t.TgZ(0,"i",15),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,_=t.oxw();return t.KtG(_.addtoWishList(e._id))}),t.qZA()}}function g(o,u){if(1&o){const i=t.EpF();t.TgZ(0,"i",16),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,_=t.oxw();return t.KtG(_.removeFromWishList(e._id))}),t.qZA()}}const L=function(o){return["/details",o]};function C(o,u){if(1&o){const i=t.EpF();t.TgZ(0,"div",3),t.YNc(1,n,1,0,"i",4),t.YNc(2,g,1,0,"i",5),t.TgZ(3,"div",6)(4,"div",7),t._UZ(5,"img",8),t.TgZ(6,"h3",9),t._uU(7),t.qZA(),t.TgZ(8,"div",10)(9,"h2",9),t._uU(10),t.ALo(11,"cuttext"),t.qZA()(),t.TgZ(12,"div",10)(13,"p"),t._uU(14),t.TgZ(15,"span"),t._uU(16,"EGP"),t.qZA()(),t.TgZ(17,"div",11),t._UZ(18,"i",12),t.TgZ(19,"span"),t._uU(20),t.qZA()()()(),t.TgZ(21,"button",13,14),t.NdJ("click",function(){const _=t.CHM(i).$implicit,E=t.MAs(22),T=t.oxw();return t.KtG(T.addProduct(_._id,E))}),t._uU(23,"Add To Cart"),t.qZA()()()}if(2&o){const i=u.$implicit,s=t.oxw();t.xp6(1),t.Q6J("ngIf",!s.wishListData.includes(i._id)),t.xp6(1),t.Q6J("ngIf",s.wishListData.includes(i._id)),t.xp6(2),t.Q6J("routerLink",t.VKq(11,L,i._id)),t.xp6(1),t.Q6J("src",i.imageCover,t.LSH),t.xp6(2),t.Oqu(i.category.name),t.xp6(3),t.Oqu(t.xi3(11,8,i.title,3)),t.xp6(4),t.Oqu(i.price),t.xp6(6),t.Oqu(i.ratingsAverage)}}let f=(()=>{class o{constructor(i,s,e,_){this._WishListService=i,this._Renderer2=s,this._CartService=e,this._ToastEvokeService=_,this.wishListProducts=[],this.wishListData=[]}ngOnInit(){localStorage.setItem("current","/wishList"),this._WishListService.displayWishListApi().subscribe({next:i=>{this.wishListProducts=i.data},error:i=>{}}),this._WishListService.displayWishListApi().subscribe({next:i=>{const s=i.data.map(e=>e._id);this.wishListData=s}})}addProduct(i,s){this._Renderer2.setAttribute(s,"disabled","true"),this._CartService.addToCart(i).subscribe({next:e=>{this._ToastEvokeService.success("Success!",e.message).subscribe(),this._Renderer2.removeAttribute(s,"disabled"),this._CartService.cartNum.next(e.numOfCartItems)},error:e=>{this._Renderer2.removeAttribute(s,"disabled")}})}addtoWishList(i){this._WishListService.addToWishListApi(i).subscribe({next:s=>{console.log(s),this._ToastEvokeService.success("Success!",s.message).subscribe()},error:s=>{console.log(s)}})}removeFromWishList(i){this._WishListService.removeFromWishListApi(i).subscribe({next:s=>{this._ToastEvokeService.success("Success!",s.message).subscribe(),this.wishListData=s.data,this._WishListService.displayWishListApi().subscribe({next:e=>{this.wishListProducts=e.data}})},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(a.i),t.Y36(t.Qsj),t.Y36(v.N),t.Y36(c.nm))};static#i=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[[1,"container","p-5","my-5"],[1,"row","g-5"],["class","col-md-3  position-relative",4,"ngFor","ngForOf"],[1,"col-md-3","position-relative"],["class","fa-regular fa-heart heart",3,"click",4,"ngIf"],["class","fa-solid fa-heart heart",3,"click",4,"ngIf"],[1,"product","p-2"],[1,"cursor-pointer",3,"routerLink"],["alt","item",1,"w-100",3,"src"],[1,"h6"],[1,"d-flex","justify-content-between"],[1,"rating"],[1,"fa-solid","fa-star","rating-color"],[1,"w-100","main-btn",3,"click"],["cartBtn",""],[1,"fa-regular","fa-heart","heart",3,"click"],[1,"fa-solid","fa-heart","heart",3,"click"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,C,24,13,"div",2),t.qZA()()),2&s&&(t.xp6(2),t.Q6J("ngForOf",e.wishListProducts))},dependencies:[h.ez,h.sg,h.O5,l.r,p.rH]})}return o})()},6286:(m,d,r)=>{r.d(d,{N:()=>t});var h=r(5619),l=r(4769),p=r(9862);let t=(()=>{class a{constructor(c){this._HttpClient=c,this.BaseUrl="https://ecommerce.routemisr.com/",this.myToken={token:localStorage.getItem("etoken")},this.cartNum=new h.X(0)}addToCart(c){return this._HttpClient.post(`${this.BaseUrl}api/v1/cart`,{productId:c},{headers:this.myToken})}getUserCartApi(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeItemApi(c){return this._HttpClient.delete(`${this.BaseUrl}api/v1/cart/${c}`)}updateCountApi(c,n){return this._HttpClient.put(`${this.BaseUrl}api/v1/cart/${c}`,{count:n})}clearCartApi(){return this._HttpClient.delete(`${this.BaseUrl}api/v1/cart`)}checkout(c,n){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:n},{headers:this.myToken})}getAllOeders(c){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${c}`)}static#t=this.\u0275fac=function(n){return new(n||a)(l.LFG(p.eN))};static#i=this.\u0275prov=l.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);